# [2016 í•˜ë°˜ê¸°] ì •ìœ¡ë©´ì²´ êµ´ë¦¬ê¸°

## ì‹¤íŒ¨â€¦ðŸ˜”

```python
n, m, x, y, k = map(int, input().split())
dirx = [0, 0, -1, 1]
diry = [1, -1, 0, 0]
arr = []
sq = [2, 2]
for i in range(n):
    arr.append(list(map(int, input().split())))

direction=list(map(int, input().split()))
print(direction)
check={
    (1,1):0,
    (2,2):0,
    (3,3):0,
    (1,2):0,
    (3,2):0,
(4,2):0
}

for i in direction:
    nr = x + dirx[i - 1]
    nc = y + diry[i - 1]
    if 0 <= nr < n and 0 <= nc < m:
        if (i == 1 or i == 2) and (sq == [1, 2] or sq == [3, 2] or sq == [4, 2] or sq == [2, 2]):
            if i == 1:
                sq = [3, 3]
            else:
                sq = [1, 1]

        elif (i == 3 or i == 4) and (sq == [3, 3] or sq == [1, 1] or sq == [2, 2]):
            if i == 3:
                sq = [1, 2]
            else:
                sq = [3, 2]
        elif (i == 1 or i == 2) and (sq == [3, 3] or sq == [1, 1]):
            if (i == 1 and sq == [3, 3]) or (i == 3 and sq == [1, 1]):
                sq = [1, 1]
            elif (i == 1 and sq == [1, 1]) or (i == 3 and sq == [3, 3]):
                sq = [2, 2]
        elif (i == 3 or i == 4) and sq == [4, 2]:
            if i == 3:
                sq = [3, 2]
            else:
                sq = [1, 2]
        elif (i == 3 or i == 4) and (sq == [1, 2] or sq == [3, 2]):
            if (i == 3 and sq == [1, 2]) or (i == 4 and sq == [3, 2]):
                sq = [4, 2]
            elif (i == 4 and sq == [1, 2]) or (i == 3 and sq == [3, 2]):
                sq = [2, 2]

        tmp = (sq[0], sq[1])
        if arr[nr][nc] == 0:
            arr[nr][nc] = check[tmp]
        else:
            check[tmp]=arr[nr][nc]
            arr[nr][nc]=0
        x = nr
        y = nc
        print(check)
        print(arr)
        if sq==[1,1] :
            print(check[(3,3)])
        elif sq==[3,3]:
            print(check[(1,1)])
        elif sq==[2,2]:
            print(check[(4,2)])
        elif sq==[1,2]:
            print(check[(3,2)])
        elif sq==[3,2]:
            print(check[(1,2)])
        elif sq==[4,2]:
            print(check[(2,2)])

```

```python
# ----- ìž…ë ¥ ë°›ê¸° -----
FACE_NUM = 6           # ì£¼ì‚¬ìœ„ ë©´ì€ 6ê°œ
OUT_OF_GRID = (-1, -1) # ê²©ìž ë°–ì„ ë‚˜íƒ€ë‚´ëŠ” íŠ¹ìˆ˜ ì¢Œí‘œ

n, m, x, y, k = map(int, input().split())   # ê²©ìž í¬ê¸°, ì‹œìž‘ ì¢Œí‘œ, ëª…ë ¹ ê°œìˆ˜
grid = [list(map(int, input().split()))     # ê²©ìž ìˆ«ìžë“¤
        for _ in range(n)]
movements = list(map(int, input().split())) # êµ´ë¦´ ë°©í–¥ë“¤

# ----- ì£¼ì‚¬ìœ„ ìƒíƒœ -----
up, front, right = 1, 2, 3   # ì²˜ìŒì— ìœ—ë©´Â·ì•žë©´Â·ì˜¤ë¥¸ìª½ë©´ ë²ˆí˜¸ë¥¼ ìž„ì˜ë¡œ 1,2,3ìœ¼ë¡œ ì •í•¨
# (ì£¼ì‚¬ìœ„ëŠ” 1~6 ë²ˆí˜¸ë¥¼ ê°–ê³ , ë§žì€íŽ¸ì€ 7 - ë©´ë²ˆí˜¸ë¼ëŠ” ì„±ì§ˆì´ ìžˆìŒ!)

dices = [0]*(FACE_NUM+1)     # ê° ë©´(1~6)ì— ì ížŒ ìˆ«ìžë¥¼ ì €ìž¥í•˜ëŠ” ë°°ì—´
                             # ì²˜ìŒì—” ì „ë¶€ 0ìœ¼ë¡œ ì‹œìž‘

# ë°©í–¥ì— ë”°ë¥¸ ì´ë™ëŸ‰: ì¸ë±ìŠ¤ê°€ 1~4 (ë¬¸ì œì—ì„œ ì •í•œ ìˆœì„œ)
dx = [0, 0, 0, -1, 1]        # ë™, ì„œ, ë¶, ë‚¨ âžœ í–‰ ë³€í™”
dy = [0, 1, -1, 0, 0]        #           âžœ ì—´ ë³€í™”

# ----- ëª…ë ¹ í•˜ë‚˜ì”© ì²˜ë¦¬ -----
for move_dir in movements:            # move_dir: 1 ë™, 2 ì„œ, 3 ë¶, 4 ë‚¨
    nx, ny = x + dx[move_dir], y + dy[move_dir]   # ë‹¤ìŒ ì¢Œí‘œ ê³„ì‚°

    # ê²©ìž ë°–ì´ë©´ ëª…ë ¹ì€ ë¬´ì‹œ (ì¶œë ¥ë„ ì—†ìŒ)
    if not (0 <= nx < n and 0 <= ny < m):
        continue

    # ì‹¤ì œë¡œ ì´ë™!
    x, y = nx, ny

    # ----- ì£¼ì‚¬ìœ„ ëŒë¦¬ê¸° -----
    # (up, front, right)ë¥¼ ìƒˆ ê°’ìœ¼ë¡œ ë°”ê¿” ì£¼ë©´ 6ë©´ì´ ì „ë¶€ ê°±ì‹ ë¨
    if move_dir == 1:          # ë™ìª½: ì˜¤ë¥¸ìª½ë©´ì´ ìœ„ë¡œ, ìœ—ë©´ì´ ì™¼ìª½ìœ¼ë¡œ
        up, front, right = 7 - right, front, up
    elif move_dir == 2:        # ì„œìª½: ì™¼ìª½ë©´(=7-right)ì´ ìœ„ë¡œ
        up, front, right = right, front, 7 - up
    elif move_dir == 3:        # ë¶ìª½: ì•žë©´ì´ ìœ„ë¡œ
        up, front, right = front, 7 - up, right
    else:                      # ë‚¨ìª½: ë’·ë©´(=7-front)ì´ ìœ„ë¡œ
        up, front, right = 7 - front, up, right

    bottom = 7 - up            # ë°”ë‹¥ë©´ ë²ˆí˜¸ëŠ” í•­ìƒ 7 - ìœ—ë©´

    # ----- ì¹¸ ìˆ«ìž â†” ì£¼ì‚¬ìœ„ ìˆ«ìž ë³µì‚¬ ê·œì¹™ -----
    if grid[x][y] == 0:                    # ì¹¸ì´ 0ì´ë©´
        grid[x][y] = dices[bottom]         # ë°”ë‹¥ë©´ ìˆ«ìžë¥¼ ì¹¸ì— ë³µì‚¬
    else:                                  # ì¹¸ì´ 0ì´ ì•„ë‹ˆë©´
        dices[bottom] = grid[x][y]         # ì¹¸ ìˆ«ìžë¥¼ ë°”ë‹¥ë©´ì— ë³µì‚¬
        grid[x][y] = 0                     # ì¹¸ì€ 0ìœ¼ë¡œ ë§Œë“¤ì–´ ì¤Œ

    # ìœ—ë©´ì— ì ížŒ ìˆ«ìž ì¶œë ¥
    print(dices[up])

```
