# [2019 하반기 오후 1번] 이상한 다트게임

1. 가능 음하하하하 

```protobuf
import sys

n, m, q = map(int, sys.stdin.readline().split())

arr = []
for i in range(n):
    arr.append(list(map(int, sys.stdin.readline().split())))

for idx in range(q):
    x, d, k = map(int, sys.stdin.readline().split())

    for i in range(x - 1, n, x):
        if d == 0:
            tmp = arr[i]
            for j in range(k):
                t1 = tmp[-1]
                tmp = [t1] + tmp[:m - 1]
            arr[i] = tmp
        else:
            tmp = arr[i]
            for j in range(k):
                t1 = tmp[0]
                tmp = tmp[1:] + [t1]
            arr[i] = tmp

    delete = set()

    for i in range(n):
        for j in range(m):
            if arr[i][j] == -1:
                continue

            if j == 0:
                check = False
                if arr[i][j] == arr[i][1]:
                    delete.add((i, 1))
                    check = True
                if arr[i][j] == arr[i][-1]:
                    delete.add((i, m - 1))
                    check = True
                if check == True:
                    delete.add((i, j))
            elif j == m - 1:
                check = False
                if arr[i][j] == arr[i][j - 1]:
                    delete.add((i, j - 1))
                    check = True
                if arr[i][j] == arr[i][0]:
                    delete.add((i, 0))
                    check = True
                if check == True:
                    delete.add((i, j))
            else:
                check = False
                if arr[i][j] == arr[i][j + 1]:
                    delete.add((i, j + 1))
                    check = True
                if arr[i][j] == arr[i][j - 1]:
                    check = True
                    delete.add((i, j - 1))
                if check == True:
                    delete.add((i, j))
            if i == 0:
                if n > 1 and arr[0][j] == arr[1][j]:
                    delete.add((0, j))
                    delete.add((1, j))
            elif i == n - 1:
                if arr[i][j] == arr[i - 1][j]:
                    delete.add((i, j))
                    delete.add((i - 1, j))
            else:
                check = False
                if arr[i][j] == arr[i - 1][j]:
                    delete.add((i - 1, j))
                    check = True
                if arr[i][j] == arr[i + 1][j]:
                    delete.add((i + 1, j))
                    check = True
                if check == True:
                    delete.add((i, j))

    cnt = len(delete)
    for r, c in delete:
        arr[r][c] = -1

    tmp = 0
    num = 0
    for i in range(n):
        for j in range(m):
            if arr[i][j] != -1:
                tmp += arr[i][j]
                num += 1

    if cnt == 0 and num > 0:
        avg = tmp // num

        for i in range(n):
            for j in range(m):
                if arr[i][j] != -1:
                    if arr[i][j] < avg:
                        arr[i][j] += 1
                    elif arr[i][j] > avg:
                        arr[i][j] -= 1

ans = 0
for i in range(n):
    for j in range(m):
        if arr[i][j] != -1:
            ans += arr[i][j]
print(ans)
```