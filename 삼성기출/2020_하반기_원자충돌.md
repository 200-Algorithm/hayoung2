# [삼성] 원자충돌

1. 시간초과 (62%에서 ) 

```protobuf
from collections import defaultdict

n,m,k=map(int,input().split())

dx=[-1,-1,0,1,1,1,0,-1]
dy=[0,1,1,1,0,-1,-1,-1]

loc=[]
for i in range(m):
    x,y,m,s,d=map(int,input().split())
    loc.append([x-1,y-1,m,s,d])

ans=0
while k>0:
    dic=defaultdict(int)
    #1단계
    tmp=[]
    for i in loc:
        x, y, m, s, d = i
        # print('처음값 : ',end=' ')
        # print(x,y,m,s,d)
        x=(x+dx[d]*s)%n
        y=(y+dy[d]*s)%n
        # print('마지막 값 :',end=' ')
        # print(x,y)
        # print()
        dic[x,y]+=1
        tmp.append([x,y,m,s,d])
    loc=tmp[:]
    tmp=[]
    for idx,v in dic.items():
        if v>1:
            t_s=0
            t_m=0
            dir=[]
    
            for i in loc :
                x, y, m, s, d = i
                if x==idx[0] and y==idx[1]:
                    t_s+=s
                    t_m+=m
                    dir.append(d)

            t_s=t_s//v
            t_m=t_m//5

            if t_m <=0:
                tmp.append([idx[0],idx[1],t_m,t_s,-5])
                continue
            # 0 2 4 ~ 상하좌우
            # 1 3 5~ 대각선
            odd=False
            e=False
            for i in dir:
                if i==0 or i%2==0:
                    e=True
                else:
                    odd=True
                if odd and e:
                    d=[1,3,5,7]
                    break
            else:
                d=[0,2,4,6]

            for i in range(4):
                tmp.append([idx[0],idx[1],t_m,t_s,d[i]])

    for i in loc:
        for idx in tmp:
            if idx[0]==i[0] and idx[1]==i[1]:
                break
        else:
            tmp.append(i)

    check=[]
    for i in tmp:
        if i[4]==-5:
            continue
        else:
            check.append(i)

    loc=check[:]
    k-=1

for i in loc:
    ans+=i[2]
print(ans)
```

1. defaultlist(list) 로 해서 구함 
- dic[(x, y)].append([m, s, d]) 이런식으로 하는거

```protobuf
from collections import defaultdict

n, m, k = map(int, input().split())

dx = [-1, -1, 0, 1, 1, 1, 0, -1]
dy = [0, 1, 1, 1, 0, -1, -1, -1]

loc = []
for i in range(m):
    x, y, m, s, d = map(int, input().split())
    loc.append([x - 1, y - 1, m, s, d])

ans = 0
while k > 0:
    dic = defaultdict(list)
    # 1단계
    tmp = []
    for i in loc:
        x, y, m, s, d = i
        # print('처음값 : ',end=' ')
        # print(x,y,m,s,d)
        x = (x + dx[d] * s) % n
        y = (y + dy[d] * s) % n
        # print('마지막 값 :',end=' ')
        # print(x,y)
        # print()
        dic[(x, y)].append([m, s, d])

    tmp = []
    for idx, v in dic.items():
        if len(v) > 1:
            t_s = 0
            t_m = 0
            dir = 0

            for i in v:
                m, s, d = i
                t_s += s
                t_m += m
                if d%2==0:
                    dir+=1

            t_s = t_s // len(v)
            t_m = t_m // 5

            if t_m <= 0:
                continue
            # 0 2 4 ~ 상하좌우
            # 1 3 5~ 대각선
            if dir == len(v) or dir == 0:
                new_d = [0, 2, 4, 6]
            else:  # 섞인 경우
                new_d = [1, 3, 5, 7]

            for d_val in new_d:
                tmp.append([idx[0], idx[1], t_m, t_s, d_val])
        else:
            m,s,d=v[0]
            tmp.append([idx[0],idx[1],m,s,d])

    loc = tmp
    k -= 1

for i in loc:
    ans += i[2]
print(ans)
```